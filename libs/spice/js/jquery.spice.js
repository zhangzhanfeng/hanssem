/**
 *
 * 共用代码，提供常用事件、方法等
 * 详细用法请参考：http://v3.spice.lh/javascript/spice
 * 如果链接无法访问，请联系QQ：1515110755 或 RTX：hong.liang
 * 
 * @ author Razy
 * @ version 3.1.0
 *
 */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a):a.spice=b(a)}(jQuery,function(a){function b(b,c,d,e){var f=d.type;d.type=c,e?a.event.trigger(d,void 0,b):a.event.dispatch.call(b,d),d.type=f}function c(a,b){for(var c=E.length,d="function"==typeof a.constructor?f:e;c--;){var g=E[c];("constructor"===g?t.has(a,g):g in a&&a[g]!==d[g]&&!t.contains(b,g))&&b.push(g)}}var d=Array.prototype,e=Object.prototype,f=Function.prototype,g=(d.push,d.slice),h=e.toString,i=e.hasOwnProperty,j=Array.isArray,k=Object.keys,l=f.bind,m=Object.create,n=navigator,o=n.userAgent,p=o.match(/(iPad).*OS\s([\d_]+)/),q=o.match(/(iPod).*OS\s([\d_]+)/i),r=!!o.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),g=Array.prototype.slice,s=a(window),t=function(){if(!(this instanceof arguments.callee))return new t};t.prototype={namespace:".spice",nav:n,ua:o,trident:o.indexOf("Trident")>-1,presto:o.indexOf("Presto")>-1,webKit:o.indexOf("AppleWebKit")>-1,gecko:o.indexOf("Gecko")>-1&&-1==o.indexOf("KHTML"),mobile:!!o.match(/AppleWebKit.*Mobile.*/),ios:!!o.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:o.indexOf("Android")>-1||o.indexOf("Adr")>-1,iPhone:!q&&!p&&o.match(/(iPhone\sOS)\s([\d_]+)/),iPad:p,iPod:q,webApp:-1==o.indexOf("Safari"),hasTouch:r,mouseenter:r?"touchend.spice touchcancel.spice":"mouseenter.spice",mouseleave:r?"touchend.spice touchcancel.spice":"mouseleave.spice",mousedown:r?"touchstart.spice":"mousedown.spice",mouseup:r?"touchend.spice touchcancel.spice":"mouseup.spice",mousemove:r?"touchmove.spice":"mousemove.spice",click:r?"touchend.spice touchcancel.spice":"click.spice",tap:"tap.spice"};var t=t();t.getMaxZIndex=function(){return Math.max.apply(null,a("*",document.body).map(function(){return a(this).css("zIndex")>>>0}).get())},t.getEvent=function(a){return t.hasTouch?a.originalEvent.changedTouches:a},t.getEventXY=function(a){var b=t.getEvent(a);return{x:b.clientX?b.clientX:b[0]?b[0].pageX:0,y:b.clientY?b.clientY:b[0]?b[0].pageY:0}},t.getStringLength=function(a){for(var b,c=0,d=0,e=a.length;d<e;d++)b=a.charCodeAt(d),c+=b>127?2:1;return c},t.subString=function(b,c,d){var e,f=0,g=0,h="",i=b.length,j=t.getStringLength(b);for(c<0&&(c=j+c),d<0||"number"!=a.type(d)?d=~~d+j:d+=c;f<i&&!(g>=c);f++){var e=b.charCodeAt(f);g+=e>127?2:1}for(;f<i;f++){var e=b.charCodeAt(f);if((g+=e>127?2:1)>d)break;h+=b.charAt(f)}return h},t.getURLParameter=function(a,b){var c=(b||window).location.search,d=new RegExp("[&?]+"+a+"=([^&]*)"),e="";return d.test(c)&&(e=RegExp.$1),e},t.visualArea=function(b,c){if(!b||!t.isString(b)||0==a(b).length)return!1;var d={callBack:null,num:0};d=a.extend({},d,c),s.off("scroll.spice.visualArea").on("scroll.spice.visualArea",function(){var c=a(this);c.scrollTop()+c.height()>a(b).offset().top-d.num&&d.callBack&&a.isFunction(d.callBack)&&d.callBack(a(b))}).trigger("scroll.spice.visualArea")},t.getScrollbarWidth=function(){if(t.android||a("body").height()<=s.height())return 0;var b,c,d=document.createElement("p"),e={width:"100px",height:"100px",overflowY:"scroll"};for(b in e)d.style[b]=e[b];return document.body.appendChild(d),c=d.offsetWidth-d.clientWidth,a(d).remove(),c},t.getWindowWidth=function(){return s.width()+t.getScrollbarWidth()},t.getTimestamp=function(){return(new Date).getTime().toString()},t.getCookie=function(a){var b=document.cookie,c=new RegExp(a+"=([^;]*)"),d="";return c.test(b)&&(d=RegExp.$1),d},t.getDates=function(a){var b=(a.length,{}),c=86400,d=0,e=a.match(/\d+\w/g);if(null==e)return!1;for(var f=0,g=e.length;f<g;f++)new RegExp("^(\\d+)([a-z]+)$","i").test(e[f]),b[RegExp.$2]=RegExp.$1;return b.s&&(d=+b.s),b.m&&(d+=60*+b.m),b.h&&(d+=60*+b.h*60),b.D&&(d+=+b.D*c),b.W&&(d+=+b.W*c*7),b.M&&(d+=+b.M*c*30),b.Y&&(d+=+b.Y*c*365),1e3*d},t.setCookie=function(a,b){var c=[];if("string"==typeof b)c=b;else if("object"==typeof b.values){for(var d in b.values)c.push(d+"="+b.values[d]+"&");c=c.join("").slice(0,-1)}else c=b.values;var e=a+"="+c;b.expires&&(e+=";expires="+new Date((new Date).getTime()+t.getDates(b.expires)).toGMTString()),b.path&&(e+=";path="+b.path),b.domain&&(e+=";domain="+b.domain),!0===b.secure&&(e+=";secure"),document.cookie=e},t.delCookie=function(a){var b=document.cookie;new RegExp(a+"=[^;]?").test(b)&&(document.cookie=a+"=;expires="+new Date(-1).toGMTString())},t.getTimeUrl=function(a){var b=t.getTimestamp();return a.indexOf("spiceflag=")>=0?a=a.replace(/spiceflag=\d{13}/,"spiceflag="+b):(a+=/\?/.test(a)?"&":"?")+"spiceflag="+b},t._ajaxSetValue=function(b,c,d){if(null!==d){var e=b[c];t.isString(e)?b[c]=[e,d]:a.isArray(e)?b[c].push(d):b[c]=d}},t._ajaxFieldValue=function(b){var c=null,d=(b.type||"").toLowerCase();return b.name&&d&&!b.disabled&&("radio"===d||"checkbox"===d?b.checked&&(c=b.value):b.multiple?(c=[],a("option",b).each(function(){this.selected&&c.push(this.value)})):c=b.value),c},t._ajaxFormToObj=function(b){if(!b)return{};b=t.isString(b)?a("#"+b).get(0):b;var c={};return a.each(b.elements,function(a,b){var d=b.name,e=(b.type||"").toLowerCase();d&&e&&-1==="file|submit|image|reset|button|".indexOf(e)&&!b.disabled&&t._ajaxSetValue(c,d,t._ajaxFieldValue(b))}),c},t._ajaxOptions=function(b,c,d){var e={};return b=t.getTimeUrl(b),1===arguments.length?e=b:(e=d||{},e.url=b,c&&(t.isString(c)?a.extend(e,{data:t._ajaxFormToObj(c)}):a.extend(e,{data:c}))),e},t.asyncXhr=function(b,c,d){a.ajax(t._ajaxOptions(b,c,d))},t.asyncXhrGet=function(b,c,d){var e=t._ajaxOptions(b,c,d);e.type="GET",a.ajax(e)},t.asyncXhrPost=function(b,c,d){var e=t._ajaxOptions(b,c,d);e.type="POST",a.ajax(e)},t.syncXhr=function(b,c,d){var e,f=t._ajaxOptions(b,c,d);return a.extend(f,{async:!1,success:function(a,b){e=a},error:function(a,b,c){e={};var d={};d.message="Error occurs when fetching data from url:"+this.url,d.cause=b||c,e.exception=d}}),a.ajax(f),e},t.syncXhrGet=function(b,c,d){return 1===arguments.length?b.type="GET":d=a.extend({},d,{type:"GET"}),t.syncXhr(b,c,d)},t.syncXhrPost=function(b,c,d){return 1===arguments.length?b.type="POST":d=a.extend({},d,{type:"POST"}),t.syncXhr(b,c,d)},t.dialog=function(b){if(!b.type||2!=b.type)return t.Dialog(b);if(!(this instanceof arguments.callee))return new t.dialog(b);var c=this;c.opt=a.extend({},c.defaultOptions,b);c.init()},t.dialog.prototype={getTemplate:function(){var b=this,c=(b.opt.type,b.opt.title),d=b.opt.content,e=b.opt.buttons,f=a('<div class="dialog">                                <div class="dialog-container">                                    <div class="dialog-content"><div>'+(c?"<h4>"+c+"</h4>":"")+(d?"<p>"+d+"</p>":"")+'</div></div>                                </div>                                <i class="icon icon-close dialog-close">&times;</i>                            </div>');if(e&&a.isPlainObject(e)){var g=a('<div class="dialog-btn-wrap"></div>');a.each(e,function(c,d){var e=d.btnClass,f=d.btnEvent,h=d.btnElem,i=h||'<a class="btn'+(e?" "+e:"")+'"><span><i></i>'+(c||"")+"</span></a>";g.append(a(i).on("tap",{dialog:b},f&&a.isFunction(f)?f:function(){}))}),a(".dialog-content",f).after(g)}return f},defaultOptions:{template:"",dialogClass:"spice-dialog",fixed:!1,title:"",content:"",buttons:null,btnCloseClass:".dialog-close",maskClass:"spice-dialog-mask",maskClose:!0,showMask:!0,autoClose:!1,speed:500,isRemove:!0},_trigger:function(a,b){this.elem.triggerHandler(a,b)},init:function(b){var c=this,d=c.opt=a.extend({},c.opt,b);return c.destroy(),c.elem=c.createElem(d.template),a.each(["initEvent"],function(b,e){a.isFunction(d[e])&&c.elem.on(e,{dialog:c},d[e])}),c._trigger("initEvent",[a(c.elem)]),c.btnClose=a(d.btnCloseClass||".dialog-close",c.elem),d.showMask&&(c.elemMask=t.mask()),c.elemMask&&c.elemMask.elem.addClass(d.maskClass),c.activate(),a(c.elem).data("spice.dialog",c),c},activate:function(){var a=this;a.btnClose.on("tap",function(){a.hide()}),a.opt.maskClose&&a.elemMask&&a.elemMask.elem.on("tap",function(){a.hide()})},refreshPosition:function(a){var a=a||this.elem,b=a.css("zIndex"),c=a.css("display"),d=a.css("opacity");a.removeAttr("style");var e=a.outerWidth(!0),f=a.outerHeight(!0),g={marginTop:-f/2,marginLeft:-e/2,left:"50%",top:"50%",position:"fixed",zIndex:b,display:c,opacity:d};if(!this.opt.fixed){var h=s.scrollTop(),i=s.height();g.position="absolute",g.marginTop="",g.top=h+(i-f)/2}f>s.height()&&(g.marginTop=0,this.opt.fixed?g.top=10:g.top=h+10),a.css(g)},createElem:function(b){var c=this,d=c.opt,e=a(b||c.getTemplate()).addClass(d.dialogClass).hide().appendTo("body");return c.refreshPosition(e),e.css("zIndex",t.getMaxZIndex()+2),e},refreshZIndex:function(){return this.elem.css("zIndex",t.getMaxZIndex()+1),this},show:function(a,b){var c=this,d=c.opt;c.refreshPosition(this.elem),c.elem.fadeTo(d.speed||b||0,1,a),c.elemMask&&c.elemMask.show(),c.elem.css("zIndex",t.getMaxZIndex()+2);var e=c.opt.autoClose;return t.isNumber(e)&&setTimeout(function(){c.hide(function(){d.isRemove&&c.destroy()})},e),c},hide:function(a,b){var c=this,d=c.opt;return c.elem.fadeOut(d.speed||b||0,a),c.elemMask&&c.elemMask.hide(),c},destroy:function(){return this.elem&&this.elem.remove(),this.elemMask&&this.elemMask.remove(),this}},t.mask=function(b){if(!(this instanceof arguments.callee))return new t.mask(b);var c=this;c.opt=a.extend({},c.defaultOptions,b),c.elem=c.createElem(),a(c.elem).data("spice.mask",c)},t.mask.prototype={defaultOptions:{maskClass:"",appendTo:"",speed:500},createElem:function(){return a("<div>",{class:"spice-black-opacity"+(this.opt.maskClass?" "+this.opt.maskClass:"")}).css("zIndex",t.getMaxZIndex()+2).appendTo(this.opt.appendTo||"body")},show:function(a,b){return this.elem.stop(!0,!0).fadeTo(this.opt.speed||b||0,.5,a),this},hide:function(a,b){return this.elem.stop(!0,!0).fadeOut(this.opt.speed||b||0,a),this},setZIndex:function(a){return this.elem.css("zIndex",a),this},refreshZIndex:function(){return this.elem.css("zIndex",t.getMaxZIndex()-1),this},remove:function(){return this.elem.remove(),this}};var u=-1;t._initScroll=function(a){t._removeScroll(a,function(b){!t.android&&t.hasTouch&&a.data("iScroll",new IScroll("#"+b,{preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|A|IMG)$/}}))})},t._removeScroll=function(a,b){var c=a.attr("id");if(window.IScroll&&c){var d=a.data("iScroll");d&&d.destroy(),b&&b(c)}},t._refreshScroll=function(a){var b=a.attr("id");if(window.IScroll&&b){var c=a.data("iScroll");c&&c.refresh()}},t.Dialog=function(b){if(!(this instanceof arguments.callee))return new t.Dialog(b);var c=this;c.opt=a.extend({},c.defaultOptions,b);c.init()},t.Dialog.prototype={getTemplate:function(b){var c=this,d=c.opt,e=(d.type,d.title),f=d.content,g=d.showMask,h=c.opt.buttons,i=a('<div class="dialog-opacity'+(g?"":" dialog-opacity-transparent")+'" id="spice-dialog-'+ ++u+'">                                    <div class="dialog-scroll-wrap">                                        <div class="dialog-scroll-container">                                            <div class="dialog-scroll">                                                <div>'+(b||'<div class="dialog">                                                        <div class="dialog-container">                                                            <div class="dialog-content"><div>'+(e?"<h4>"+e+"</h4>":"")+(f?"<p>"+f+"</p>":"")+'</div></div>                                                        </div>                                                        <i class="icon icon-close dialog-close">&times;</i>                                                    </div>')+"</div>                                            </div>                                        </div>                                    </div>                                </div>");if(h&&a.isPlainObject(h)){var j=a('<div class="dialog-btn-wrap"></div>');a.each(h,function(b,d){var e=d.btnClass,f=d.btnEvent,g=d.btnElem,h=g||'<a class="btn'+(e?" "+e:"")+'"><span><i></i>'+(b||"")+"</span></a>";j.append(a(h).on("tap",{dialog:c},f&&a.isFunction(f)?f:function(){}))}),a(".dialog-content",i).after(j)}return i},defaultOptions:{template:"",dialogClass:"spice-dialog",title:"",content:"",buttons:null,btnCloseClass:".dialog-close",maskClose:!0,showMask:!0,autoClose:!1,speed:500,isRemove:!0},_trigger:function(a,b){this.elem.triggerHandler(a,b)},init:function(b){var c=this,d=c.opt=a.extend({},c.opt,b);return c.destroy(),c.elem=c.createElem(d.template),a.each(["initEvent"],function(b,e){a.isFunction(d[e])&&c.elem.on(e,{dialog:c},d[e])}),c._trigger("initEvent",[a(c.elem)]),c.btnClose=a(d.btnCloseClass||".dialog-close",c.elem),c.activate(),a(c.elem).data("spice.dialog",c),c},activate:function(){var b=this;b.btnClose.on("tap",function(){b.hide()}),b.opt.maskClose&&b.elem.on("tap",function(c){0==a(c.target).closest(".dialog").length&&b.hide()})},createElem:function(b){var c=this,d=c.opt,e=a(c.getTemplate(b)).addClass(d.dialogClass).hide().appendTo("body");return e.css("zIndex",t.getMaxZIndex()+1),e},refreshZIndex:function(){return this.elem.css("zIndex",t.getMaxZIndex()+1),this},show:function(b,c){a("body, html").addClass("overflow-hidden");var d=this,e=d.opt,f=d.elem;f.fadeTo(d.opt.speed||c||0,1,function(){b&&a.isFunction(b)&&b(),t._initScroll(f)});var g=d.opt.autoClose;return t.isNumber(g)&&setTimeout(function(){d.hide(function(){e.isRemove&&d.destroy()})},g),d},hide:function(b,c){var d=this;return d.elem.fadeOut(d.opt.speed||c||0,function(){b&&a.isFunction(b)&&b(),a(".dialog-opacity:visible").length<=0&&a("body, html").removeClass("overflow-hidden")}),d},destroy:function(){var a=this.elem;return a&&0!=a.length&&(t._removeScroll(a),a.remove()),this}},t.checkEmail=function(a,b){try{return(b||/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/).test(a)}catch(a){return!1}},t.checkMobile=function(a,b){try{return(b||/^(1[3-9]{1}[0-9]{1})\d{8}$/).test(a)}catch(a){return!1}},a.each("tap".split(" "),function(b,c){a.fn[c]=function(a){return a?this.on(c,a):this.trigger(c)},a.attrFn&&(a.attrFn[c]=!0)}),a.event.special.tap={setup:function(c,d,e){function f(){return{sx:0,sy:0,ex:0,ey:0}}var g=f(),h=a(this);t.hasTouch&&!t.android?h.on(t.mousedown,function(a){var b=t.getEventXY(a);g.sx=b.x,g.sy=b.y}).on(t.click,function(a){var c=t.getEventXY(a);g.ex=c.x,g.ey=c.y,g.sx==g.ex&&g.sy==g.ey&&(b(h[0],"tap",a),g=f())}):h.on("click",function(a){b(h[0],"tap",a)})},teardown:function(b){a(this).off("click").off(t.mousedown)}};var v=function(){},w=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},x=function(a,b,c){return null==a?t.identity:t.isFunction(a)?w(a,b,c):t.isObject(a)?t.matches(a):t.property(a)};t.iteratee=function(a,b){return x(a,b,1/0)};var y=function(a){return function(b){var c=arguments.length;if(c<2||null==b)return b;for(var d=0;d<c;d++)for(var e=arguments[d],f=a(e),g=f.length,h=0;h<g;h++){var i=f[h];b[i]=e[i]}return b}},z=function(a){if(!t.isObject(a))return{};if(m)return m(a);v.prototype=a;var b=new v;return v.prototype=null,b};t.each=t.forEach=function(a,b,c){if(null==a)return a;b=w(b,c);var d,e=a.length;if(e===+e)for(d=0;d<e;d++)b(a[d],d,a);else{var f=t.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},t.map=t.collect=function(a,b,c){if(null==a)return[];b=x(b,c);for(var d,e=a.length!==+a.length&&t.keys(a),f=(e||a).length,g=Array(f),h=0;h<f;h++)d=e?e[h]:h,g[h]=b(a[d],d,a);return g},t.reduce=t.foldl=t.inject=function(a,b,c,d){null==a&&(a=[]),b=w(b,d,4);var e,f=a.length!==+a.length&&t.keys(a),g=(f||a).length,h=0;for(arguments.length<3&&(c=a[f?f[h++]:h++]);h<g;h++)e=f?f[h]:h,c=b(c,a[e],e,a);return c},t.reduceRight=t.foldr=function(a,b,c,d){null==a&&(a=[]),b=w(b,d,4);var e,f=a.length!==+a.length&&t.keys(a),g=(f||a).length;for(arguments.length<3&&(c=a[f?f[--g]:--g]);g-- >0;)e=f?f[g]:g,c=b(c,a[e],e,a);return c},t.transform=function(a,b,c,d){if(null==c)if(t.isArray(a))c=[];else if(t.isObject(a)){var e=a.constructor;c=z("function"==typeof e&&e.prototype)}else c={};if(null==a)return c;b=w(b,d,4);var f,g,h=a.length!==+a.length&&t.keys(a),i=(h||a).length;for(f=0;f<i&&(g=h?h[f]:f,!1!==b(c,a[g],g,a));f++);return c},t.find=t.detect=function(a,b,c){var d;if(void 0!==(d=a.length===+a.length?t.findIndex(a,b,c):t.findKey(a,b,c))&&-1!==d)return a[d]},t.filter=t.select=function(a,b,c){var d=[];return null==a?d:(b=x(b,c),t.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d)},t.reject=function(a,b,c){return t.filter(a,t.negate(x(b)),c)},t.every=t.all=function(a,b,c){if(null==a)return!0;b=x(b,c);var d,e,f=a.length!==+a.length&&t.keys(a),g=(f||a).length;for(d=0;d<g;d++)if(e=f?f[d]:d,!b(a[e],e,a))return!1;return!0},t.some=t.any=function(a,b,c){if(null==a)return!1;b=x(b,c);var d,e,f=a.length!==+a.length&&t.keys(a),g=(f||a).length;for(d=0;d<g;d++)if(e=f?f[d]:d,b(a[e],e,a))return!0;return!1},t.contains=t.includes=t.include=function(a,b,c){return null!=a&&(a.length!==+a.length&&(a=t.values(a)),t.indexOf(a,b,"number"==typeof c&&c)>=0)},t.invoke=function(a,b){var c=g.call(arguments,2),d=t.isFunction(b);return t.map(a,function(a){return(d?b:a[b]).apply(a,c)})},t.pluck=function(a,b){return t.map(a,t.property(b))},t.where=function(a,b){return t.filter(a,t.matches(b))},t.findWhere=function(a,b){return t.find(a,t.matches(b))},t.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=a.length===+a.length?a:t.values(a);for(var h=0,i=a.length;h<i;h++)(d=a[h])>f&&(f=d)}else b=x(b,c),t.each(a,function(a,c,d){((e=b(a,c,d))>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},t.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=a.length===+a.length?a:t.values(a);for(var h=0,i=a.length;h<i;h++)(d=a[h])<f&&(f=d)}else b=x(b,c),t.each(a,function(a,c,d){((e=b(a,c,d))<g||e===1/0&&f===1/0)&&(f=a,g=e)});return f},t.shuffle=function(a){for(var b,c=a&&a.length===+a.length?a:t.values(a),d=c.length,e=Array(d),f=0;f<d;f++)b=t.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},t.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=t.values(a)),a[t.random(a.length-1)]):t.shuffle(a).slice(0,Math.max(0,b))},t.sortBy=function(a,b,c){return b=x(b,c),t.pluck(t.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){return t.comparator(a.criteria,b.criteria)||a.index-b.index}),"value")};var A=function(a){return function(b,c,d){var e={};return c=x(c,d),t.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};t.groupBy=A(function(a,b,c){t.has(a,c)?a[c].push(b):a[c]=[b]}),t.indexBy=A(function(a,b,c){a[c]=b}),t.countBy=A(function(a,b,c){t.has(a,c)?a[c]++:a[c]=1}),t.toArray=function(a){return a?t.isArray(a)?g.call(a):a.length===+a.length?t.map(a,t.identity):t.values(a):[]},t.size=function(a){return null==a?0:a.length===+a.length?a.length:t.keys(a).length},t.partition=function(a,b,c){b=x(b,c);var d=[],e=[];return t.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},t.first=t.head=t.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:t.initial(a,a.length-b)},t.initial=function(a,b,c){return g.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},t.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:t.rest(a,Math.max(0,a.length-b))},t.rest=t.tail=t.drop=function(a,b,c){return g.call(a,null==b||c?1:b)},t.compact=function(b){return a.grep(b,function(b,c){return(!a.isPlainObject(b)||!a.isEmptyObject(b))&&((!a.isArray(b)||0!=b.length)&&b)})};var B=function(a,b,c,d){for(var e,f=[],g=0,h=d||0,i=a&&a.length;h<i;h++)if((e=a[h])&&e.length>=0&&(t.isArray(e)||t.isArguments(e))){b||(e=B(e,b,c));var j=0,k=e.length;for(f.length+=k;j<k;)f[g++]=e[j++]}else c||(f[g++]=e);return f};t.flatten=function(a,b){return B(a,b,!1)},t.without=function(a){return t.difference(a,g.call(arguments,1))},t.uniq=t.unique=function(a,b,c,d){if(null==a)return[];t.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=x(c,d));for(var e=[],f=[],g=0,h=a.length;g<h;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?t.contains(f,j)||(f.push(j),e.push(i)):t.contains(e,i)||e.push(i)}return e},t.union=function(){return t.uniq(B(arguments,!0,!0))},t.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;d<e;d++){var f=a[d];if(!t.contains(b,f)){for(var g=1;g<c&&t.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},t.difference=function(a){var b=B(arguments,!0,!0,1);return t.filter(a,function(a){return!t.contains(b,a)})},t.zip=function(a){if(null==a)return[];for(var b=t.max(arguments,"length").length,c=Array(b);b-- >0;)c[b]=t.pluck(arguments,b);return c},t.unzip=function(a){return t.zip.apply(null,a)},t.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},t.indexOf=function(a,b,c){var d=0,e=a&&a.length;if("number"==typeof c)d=c<0?Math.max(0,e+c):c;else if(c&&e)return d=t.sortedIndex(a,b),a[d]===b?d:-1;for(;d<e;d++)if(a[d]===b)return d;return-1},t.lastIndexOf=function(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=c<0?d+c+1:Math.min(d,c+1));--d>=0;)if(a[d]===b)return d;return-1},t.findIndex=function(a,b,c){b=x(b,c);for(var d=null!=a?a.length:0,e=0;e<d;e++)if(b(a[e],e,a))return e;return-1},t.sortedIndex=function(a,b,c,d){c=x(c,d,1);for(var e=c(b),f=0,g=a.length;f<g;){var h=Math.floor((f+g)/2);t.comparator(c(a[h]),e)<0?f=h+1:g=h}return f},t.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e};var C=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=z(a.prototype),g=a.apply(f,e);return t.isObject(g)?g:f};t.bind=function(a,b){if(l&&a.bind===l)return l.apply(a,g.call(arguments,1));if(!t.isFunction(a))throw new TypeError("Bind must be called on a function");var c=g.call(arguments,2);return function d(){return C(a,d,b,this,c.concat(g.call(arguments)))}},t.partial=function(a){var b=g.call(arguments,1);return function c(){for(var d=0,e=b.slice(),f=0,g=e.length;f<g;f++)e[f]===t&&(e[f]=arguments[d++]);for(;d<arguments.length;)e.push(arguments[d++]);return C(a,c,this,this,e)}},t.bindAll=function(a){var b,c,d=arguments.length;if(d<=1)throw new Error("bindAll must be passed function names");for(b=1;b<d;b++)c=arguments[b],a[c]=t.bind(a[c],a);return a},t.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return t.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},t.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},t.defer=t.partial(t.delay,t,1),t.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=!1===c.leading?0:t.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=t.now();h||!1!==c.leading||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||!1===c.trailing||(g=setTimeout(i,k)),f}},t.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=t.now()-g;j<b&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=t.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},t.wrap=function(a,b){return t.partial(b,a)},t.negate=function(a){return function(){return!a.apply(this,arguments)}},t.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},t.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},t.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=null),c}},t.once=t.partial(t.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),E=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];t.keys=function(a){if(!t.isObject(a))return[];if(k)return k(a);var b=[];for(var c in a)t.has(a,c)&&b.push(c);return b},t.keysIn=function(a){if(!t.isObject(a))return[];var b=[];for(var d in a)b.push(d);return D&&c(a,b),b},t.values=function(a){for(var b=t.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},t.pairs=function(a){for(var b=t.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},t.invert=function(a){for(var b={},c=t.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},t.functions=t.methods=function(a){var b=[];for(var c in a)t.isFunction(a[c])&&b.push(c);return b.sort()},t.extend=y(t.keysIn),t.assign=y(t.keys),t.findKey=function(a,b,c){b=x(b,c);for(var d,e=t.keys(a),f=0,g=e.length;f<g;f++)if(d=e[f],b(a[d],d,a))return d},t.pick=function(a,b,c){var d,e={};if(null==a)return e;if(t.isFunction(b)){b=w(b,c);for(d in a){var f=a[d];b(f,d,a)&&(e[d]=f)}}else{var g=B(arguments,!1,!1,1);a=new Object(a);for(var h=0,i=g.length;h<i;h++)(d=g[h])in a&&(e[d]=a[d])}return e},t.omit=function(a,b,c){if(t.isFunction(b))b=t.negate(b);else{var d=t.map(B(arguments,!1,!1,1),String);b=function(a,b){return!t.contains(d,b)}}return t.pick(a,b,c)},t.defaults=function(a){if(!t.isObject(a))return a;for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b];for(var e in d)void 0===a[e]&&(a[e]=d[e])}return a},t.create=function(a,b){var c=z(a);return b&&t.assign(c,b),c},t.clone=function(a){return t.isObject(a)?t.isArray(a)?a.slice():t.extend({},a):a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;var e=h.call(a);if(e!==h.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!=+a?+b!=+b:0==+a?1/+a==1/b:+a==+b;case"[object Date]":case"[object Boolean]":return+a==+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,i=b.constructor;if(g!==i&&!(t.isFunction(g)&&g instanceof g&&t.isFunction(i)&&i instanceof i)&&"constructor"in a&&"constructor"in b)return!1}for(var j=c.length;j--;)if(c[j]===a)return d[j]===b;if(c.push(a),d.push(b),f){if((j=a.length)!==b.length)return!1;for(;j--;)if(!F(a[j],b[j],c,d))return!1}else{var k,l=t.keys(a);if(j=l.length,t.keys(b).length!==j)return!1;for(;j--;)if(k=l[j],!t.has(b,k)||!F(a[k],b[k],c,d))return!1}return c.pop(),d.pop(),!0};t.isEqual=function(a,b){return F(a,b,[],[])},t.isEmpty=function(a){if(null==a)return!0;if(t.isArray(a)||t.isString(a)||t.isArguments(a))return 0===a.length;for(var b in a)if(t.has(a,b))return!1;return!0},t.isElement=function(a){return!(!a||1!==a.nodeType)},t.isArray=j||function(a){return"[object Array]"===h.call(a)},t.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},t.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){t["is"+a]=function(b){return h.call(b)==="[object "+a+"]"}}),t.isArguments(arguments)||(t.isArguments=function(a){return t.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(t.isFunction=function(a){return"function"==typeof a||!1}),t.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},t.isNaN=function(a){return t.isNumber(a)&&a!==+a},t.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===h.call(a)},t.isNull=function(a){return null===a},t.isUndefined=function(a){return void 0===a},t.has=function(a,b){return null!=a&&i.call(a,b)},t.identity=function(a){return a},t.constant=function(a){return function(){return a}},t.noop=function(){},t.property=function(a){return function(b){return null==b?void 0:b[a]}},t.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},t.matches=function(a){var b=t.pairs(a),c=b.length;return function(a){if(null==a)return!c;a=new Object(a);for(var d=0;d<c;d++){var e=b[d],f=e[0];if(e[1]!==a[f]||!(f in a))return!1}return!0}},t.comparator=function(a,b){if(a===b)return 0;var c=a>=a,d=b>=b;if(c||d){if(c&&!d)return-1;if(d&&!c)return 1}return a>b?1:b>a?-1:0},t.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},t.now=Date.now||function(){return(new Date).getTime()};var G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=t.invert(G),I=function(a){var b=function(b){return a[b]},c="(?:"+t.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};t.escape=I(G),t.unescape=I(H),t.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),t.isFunction(d)?d.call(a):d};var J=0;t.uniqueId=function(a){var b=++J+"";return a?a+b:b},t.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},L=function(a){return"\\"+K[a]};t.template=function(a,b,c){!b&&c&&(b=c),b=t.defaults({},b,t.templateSettings);var d=RegExp([(b.escape||/(.)^/).source,(b.interpolate||/(.)^/).source,(b.evaluate||/(.)^/).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(/\\|'|\r|\n|\u2028|\u2029/g,L),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':spice.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","spice",f)}catch(a){throw a.source=f,a}var h=function(a){return g.call(this,a,t)};return h.source="function("+(b.variable||"obj")+"){\n"+f+"}",h},t.chain=function(a){var b=t(a);return b._chain=!0,b},t.config={throttleTime:100,debounceTime:300,resize:{standard:1024,medium:768,small:767}},t.resizeScreenDebounce=function(b){var c=a.extend({},t.config,{isRetinaCheck:!0,callBack:null},b),b=c.resize,d=t.sortBy(b),e=t.invert(b);return t.debounce(function(){var b,f=t.getWindowWidth();a.each(d,function(a,c){0===a&&f<=c&&(b=e[c]),d[a+1]?f<=d[a+1]&&f>=c&&(b=e[c]):f>c&&(b=e[c])}),c.isRetinaCheck&&window.devicePixelRatio>1&&(b+="_retina"),c.callBack&&a.isFunction(c.callBack)&&c.callBack(b)},c.debounceTime)};var M;return t.init=function(b){if(t.config=a.extend({},t.config,b),!M){var c=[];a.each(t.config.resize,function(a,b){c.push("events-spice-"+a+" style-spice-"+a)}),c=c.join(" "),M=t.resizeScreenDebounce({isRetinaCheck:!1,callBack:function(b){var d="events-spice-"+b+" style-spice-"+b;a("body").removeClass(c).addClass(d)}})}a(window).off("resize.spice.screen").on("resize.spice.screen",M).trigger("resize.spice.screen")},t}),function(){for(var a,b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],c=b.length,d=window.console=window.console||{};c--;)a=b[c],d[a]||(d[a]=$.noop)}();
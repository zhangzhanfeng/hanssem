/**
 *
 * 按钮下拉框
 * 详细用法请参考：http://v3.spice.lh/javascript/dropdown
 * 如果链接无法访问，请联系QQ：1515110755 或 RTX：hong.liang
 *
 * @ author Razy
 * @ version 1.0
 *
 */
!function(a,b,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a):a.spice.dropdown=b(a)}(jQuery,function(a){function b(b,c){if(!b||a.isPlainObject(b))return!1;a("body").off("tap.dropdown").on("tap.dropdown",function(b){a.each(d,function(c,d){var e=a(d).data("spice.dropdown");e&&(a.contains(a(d)[0],b.target)||(a(e.opt.showElem,d).hide(),e.elem.removeClass(e.opt.addClass),e.opt.hideCallBack&&a.isFunction(e.opt.hideCallBack)&&e.opt.hideCallBack(e)))})});var f=[];return a(b).each(function(b,g){var h=a(g),i=h.data("spice.dropdown");d.push(g),i||h.data("spice.dropdown",i=new e(h,c)),f.push(i)}),f}var c={dropElem:".btn",addClass:"is-open",showElem:".sub-menu",showElemTap:"li",showElemTapCallBack:null,showCallBack:null,hideCallBack:null,tinyscrollbarCallBack:null,tinyscrollbarConfig:{},customScroll:null,isIscroll:!1,disabledClass:"is-disabled"},d=[],e=function(b,d){var e=this;e.opt=a.extend({},c,d),e.elem=b,e.init()};return e.prototype={init:function(){var b=this,c=b.opt,d=b.elem,e=a(c.dropElem,d),f=a(c.showElem,d),g=c.tinyscrollbarConfig,h=c.customScroll;e.off("tap.dropdown").on("tap.dropdown",function(){b.hideAllMenu(d),f.is(":visible")?(f.hide(),d.removeClass(c.addClass),c.hideCallBack&&a.isFunction(c.hideCallBack)&&c.hideCallBack(b)):(f.show(),d.addClass(c.addClass),c.showCallBack&&a.isFunction(c.showCallBack)&&c.showCallBack(b),h?a.isFunction(h)&&h(b):(g.callBack||(g.callBack=function(d){c.tinyscrollbarCallBack&&a.isFunction(c.tinyscrollbarCallBack)&&c.tinyscrollbarCallBack(b,d)}),a.spice.tools.tinyscrollbar({elem:a(".tinyscrollbar",d),options:g,isIscroll:c.isIscroll})))}),f.off("tap.dropdown").on("tap.dropdown",function(b){a(b.target).hasClass("scrollbar")||a(b.target).closest(".scrollbar").length}),a(c.showElemTap,f).off("tap.dropdown").on("tap.dropdown",function(d){if(d.preventDefault(),a(this).hasClass(c.disabledClass))return!1;c.showElemTapCallBack&&a.isFunction(c.showElemTapCallBack)&&c.showElemTapCallBack(a(this),b),e.trigger("tap.dropdown")})},hideAllMenu:function(b){var c=this;a.each(d,function(d,e){a(c.opt.showElem,a(e).not(b)).hide()})},destroy:function(){a(this.opt.dropElem,this.elem).off("tap.dropdown"),a(this.opt.showElemTap,this.elem).off("tap.dropdown"),a(this.opt.showElem,this.elem).off("tap.dropdown"),a(this.opt.showElem,this.elem).hide(),this.elem.removeClass(this.opt.addClass),a.spice.tools.tinyscrollbar.destroy(a(".tinyscrollbar",this.elem)),this.elem.removeData("spice.dropdown")},hide:function(){a(this.opt.showElem,this.elem).hide(),this.elem.removeClass(this.opt.addClass)}},b});
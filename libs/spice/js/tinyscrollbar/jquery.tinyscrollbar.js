/**
 *
 * 滚动条
 * 详细用法请参考：http://v3.spice.lh/javascript/tinyscrollbar
 * 如果链接无法访问，请联系QQ：1515110755 或 RTX：hong.liang
 *
 */
!function(a){"use strict";function b(b,e){function f(a){s.css(x,a||n.thumbPosition),p.css(x,a||-n.contentPosition),q.css(w,a||n.trackSize),r.css(w,a||n.trackSize),s.css(w,a||n.thumbSize)}function g(){t?o[0].ontouchstart=function(a){1===a.touches.length&&(a.stopPropagation(),j(a.touches[0]))}:(s.bind("mousedown",function(a){a.stopPropagation(),j(a)}),r.bind("mousedown",function(a){j(a,!0)})),a(window).bind("resize."+c,function(){n.update("relative")}),n.options.wheel&&window.addEventListener?b[0].addEventListener(u,k,!1):n.options.wheel&&(b[0].onmousewheel=k)}function h(){return n.contentPosition>0}function i(){return n.contentPosition<=n.contentSize-n.viewportSize-5}function j(b,c){n.hasContentToSroll&&(a("body").addClass("noSelect"),y=c?s.offset()[x]:v?b.pageX:b.pageY,t?(document.ontouchmove=function(a){(n.options.touchLock||h()&&i())&&a.preventDefault(),l(a.touches[0])},document.ontouchend=m):(a(document).bind("mousemove",l),a(document).bind("mouseup",m),s.bind("mouseup",m),r.bind("mouseup",m)),l(b))}function k(c){if(n.hasContentToSroll){var d=c||window.event,e=-(d.deltaY||d.detail||-1/3*d.wheelDelta)/40,f=1===d.deltaMode?n.options.wheelSpeed:1;n.contentPosition-=e*f*n.options.wheelSpeed,n.contentPosition=Math.min(n.contentSize-n.viewportSize,Math.max(0,n.contentPosition)),n.thumbPosition=n.contentPosition/n.trackRatio,b.trigger("move"),s.css(x,n.thumbPosition),p.css(x,-n.contentPosition),(n.options.wheelLock||h()&&i())&&(d=a.event.fix(d),d.preventDefault()),n.options.callBack&&a.isFunction(n.options.callBack)&&n.options.callBack(n)}}function l(c){if(n.hasContentToSroll){var d=v?c.pageX:c.pageY,e=t?y-d:d-y,f=Math.min(n.trackSize-n.thumbSize,Math.max(0,n.thumbPosition+e));f&&(n.contentPosition=f*n.trackRatio),b.trigger("move"),s.css(x,f),p.css(x,-n.contentPosition),n.options.callBack&&a.isFunction(n.options.callBack)&&n.options.callBack(n)}}function m(){n.thumbPosition=parseInt(s.css(x),10)||0,a("body").removeClass("noSelect"),a(document).unbind("mousemove",l),a(document).unbind("mouseup",m),s.unbind("mouseup",m),r.unbind("mouseup",m),document.ontouchmove=document.ontouchend=null}this.options=a.extend({},d,e),this._defaults=d,this._name=c;var n=this,o=b.find(".viewport"),p=b.find(".overview"),q=b.find(".scrollbar"),r=q.find(".track"),s=q.find(".thumb"),t=a.spice.hasTouch,u="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",v="x"===this.options.axis,w=v?"width":"height",x=v?"marginLeft":"marginTop",y=0;return this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.hasContentToSroll=!1,this.update=function(a){var b=w.charAt(0).toUpperCase()+w.slice(1).toLowerCase();switch(this.viewportSize=o[0]["offset"+b],this.contentSize=p[0]["scroll"+b],this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.thumbSize=Math.min(this.trackSize,Math.max(this.options.thumbSizeMin,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize),this.hasContentToSroll=this.contentRatio<1,q.toggleClass("disable",!this.hasContentToSroll),a){case"bottom":this.contentPosition=Math.max(this.contentSize-this.viewportSize,0);break;case"relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(a,10)||0}return this.thumbPosition=this.contentPosition/this.trackRatio,f(),n},this.remove=function(){f("0"),t?o[0].ontouchstart=null:(s.unbind("mousedown"),r.unbind("mousedown")),a(window).unbind("resize."+c),n.options.wheel&&window.addEventListener?b[0].removeEventListener(u,k,!1):n.options.wheel&&(b[0].onmousewheel=null)},function(){return n.update(),g(),n}()}var c="tinyscrollbar",d={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,touchLock:!0,trackSize:!1,thumbSize:!1,thumbSizeMin:20,callBack:null};a.spice[c]=function(d,e){return!(!d||a.isPlainObject(d))&&a(d).each(function(d,f){a(f).removeData("spice."+c),a.data(this,"spice."+c,new b(a(this),e))})}}(jQuery);
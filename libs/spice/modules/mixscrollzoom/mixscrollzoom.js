!function(a,b){var c={config:b.spice.config,scrollSelector:".events-scroll-loop-false",scrollOptions:{standard:{type:"scroll",autoPlay:!1,loop:!1,btn:!1},medium:{type:"scroll",autoPlay:!1,loop:!1,btn:!1},small:{type:"scroll-loop",autoPlay:!1,loop:!0,btn:!1,dot:{style:"dot"}}},gallerySelector:".events-scroll-gallery",galleryOptions:{standard:{type:"gallery",autoPlay:!1,loop:!1,moveNum:2,gallery_show_num:4},medium:{type:"gallery",autoPlay:!1,loop:!1,moveNum:1,gallery_show_num:3},small:{type:"gallery",autoPlay:!1,moveNum:0,loop:!1}},cloudZoomSelector:".event-cloudzoom-default",cloudZoomOptions:{standard:{animationTime:300,easeTime:0,zoomWidth:200,zoomHeight:300,zoomOffsetX:20},medium:{animationTime:300,easeTime:0,zoomOffsetX:0,zoomPosition:"inside"},small:{}},speed:"normal"};b.spice.mixScrollZoom=function(a,b){return new mixScrollZoom(a,b).init()},mixScrollZoom=function(d,e){"use strict";function f(a,c){k=b(m.gallerySelector).find("li"),l=k.length,k.removeClass("is-active").eq(a%l-1).addClass("is-active"),m.scroll_index=a%l-1}var g,h,i,j,k,l;d=d||".mix-scroll-zoom",b.isPlainObject(e)||(e={}),this.tempObj=e;var m=this;m.handleMedia=function(a){a!=m.prevMedia&&(i&&(b(m.gallerySelector).data("spice.kvScroll").destroy(),i=null),j&&b(m.cloudZoomSelector).off(),m.galleryOptions[a].gallery_show_num<l&&(m.gallery=b.spice.kvScroll(m.gallerySelector,m.galleryOptions[a])),m.galleryOptions[a].gallery_show_num&&m.setGalleryItemStyle(m.galleryOptions[a].gallery_show_num),b.spice.keys(m.cloudZoomOptions[a]).length>0?(b.spice.cloudZoom(m.cloudZoomSelector,m.cloudZoomOptions[a]),j=!0,m.scrollOptions[a].callBack=""):(m.galleryOptions[a].gallery_show_num||b(m.gallerySelector).find("ul,ul li").attr("style","").removeClass("is-active"),m.scrollOptions[a].callBack=f),b.spice.kvScroll(m.scrollSelector,m.scrollOptions[a]),b(m.gallerySelector).find("li").eq(0).tap(),m.prevMedia=a)},this.setGalleryItemStyle=function(a){b(this.gallerySelector+" .scroller-wrap").find("ul").css("width",l/a*100+"%").find("li").css("width",100/l+"%")},this.handle_gallery_click=function(){h.find(g.gallerySelector).find("li").off("tap").on("tap",function(a){var c=b(m.scrollSelector).data("spice.kvScroll");if(c.isNotAnimate()){var d=b(this);m.scroll_index=d.index(),b(".scroll-dots",m.selector).length>0?b(".scroll-dots",m.selector).find("a").eq(m.scroll_index).tap():c.scroller(m.scroll_index,m.speed),d.addClass("is-active").prevAll().removeClass("is-active"),d.nextAll().removeClass("is-active")}})},this.initial=function(){this.options=b.extend({},c,this.tempObj),g=this.options,g.config.debounceTime=0,this.config=b.extend(g.config,{isRetinaCheck:!(!this.tempObj.config||!this.tempObj.config.isRetinaCheck)&&this.tempObj.config.isRetinaCheck,callBack:m.handleMedia}),this.selector=g.selector=d,this.scrollOptions=g.scrollOptions,this.scrollSelector=g.selector+" "+g.scrollSelector,this.galleryOptions=g.galleryOptions,this.gallerySelector=g.selector+" "+g.gallerySelector,this.cloudZoomOptions=g.cloudZoomOptions,this.cloudZoomSelector=g.selector+" "+g.cloudZoomSelector,this.speed=g.speed,h=b(this.selector),i=null,j=!1,k=b(g.gallerySelector+" li",h),l=k.length,this.prevMedia=null},this.destroy=function(){b(this.selector).removeData("spice.minScrollZoom"),b(this.scrollSelector).data("spice.kvScroll").destroy(),b(this.gallerySelector).data("spice.kvScroll").destroy(),b(this.cloudZoomSelector).data("CloudZoom").destroy()},this.init=function(){this.initial(),this.resizeScreenDebounce=b.spice.resizeScreenDebounce(this.config),b(a).off("resize"+m.selector).on("resize"+m.selector,this.resizeScreenDebounce).trigger("resize").resize(function(){b(a).trigger("resize"+m.selector)}),this.handle_gallery_click(),b(this.selector).data("spice.mixScrollZoom",this)}}}(window,jQuery);